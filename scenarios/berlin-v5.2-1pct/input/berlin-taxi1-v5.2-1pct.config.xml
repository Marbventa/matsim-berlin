<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE config SYSTEM "http://www.matsim.org/files/dtd/config_v2.dtd">
<config>
	<module name="TimeAllocationMutator" >
		<param name="mutationRange" value="7200.0" />
	</module>
	<module name="controler" >
		<param name="lastIteration" value="500" />
		<param name="overwriteFiles" value="deleteDirectoryIfExists" />
		<param name="runId" value="berlin-taxi1-v5.2-1pct" />
		<param name="outputDirectory" value="./scenarios/berlin-v5.2-1pct/output-berlin-taxi1-v5.2-1pct" />
		<param name="writeEventsInterval" value="50" />
		<param name="writePlansInterval" value="50" />
	</module>
	<module name="global" >
		<param name="coordinateSystem" value="GK4" />
		<param name="insistingOnDeprecatedConfigVersion" value="false" />
		<param name="numberOfThreads" value="8" />
	</module>
	<module name="network" >
		<param name="inputNetworkFile" value="../../berlin-v5.2-10pct/input/berlin-v5.0.network.xml.gz" />
	</module>
	<module name="plans" >
		<param name="inputPersonAttributesFile" value="../../berlin-v5.2-10pct/input/berlin-v5.0.person-attributes.xml.gz" />
		<param name="inputPlansFile" value="berlin-v5.2-1pct.plans.xml.gz" />
		<param name="removingUnnecessaryPlanAttributes" value="false" />
	</module>
	<module name="vehicles" >
		<param name="vehiclesFile" value="../../berlin-v5.2-10pct/input/berlin-v5.0.mode-vehicle-types_car-car_bb-freight.xml" />
	</module>
	<module name="transit" >
		<param name="transitScheduleFile" value="../../berlin-v5.2-10pct/input/berlin-v5.0.transit-schedule.xml.gz" />
		<param name="useTransit" value="true" />
		<param name="vehiclesFile" value="../../berlin-v5.2-10pct/input/berlin-v5.0.transit-vehicles.xml.gz" />
	</module>
	<module name="planscalcroute" >
		<param name="networkModes" value="car,car_bb,freight,ride" />
		<parameterset type="teleportedModeParameters" >
			<param name="beelineDistanceFactor" value="1.4" />
			<param name="mode" value="bicycle" />
			<param name="teleportedModeSpeed" value="3.3333333" />
		</parameterset>
		<parameterset type="teleportedModeParameters" >
			<param name="beelineDistanceFactor" value="1.5" />
			<param name="mode" value="walk" />
			<param name="teleportedModeSpeed" value="1.1111111" />
		</parameterset>
	</module>
	<module name="qsim" >
		<param name="simStarttimeInterpretation" value="onlyUseStarttime" />
		<param name="endTime" value="36:00:00" />
		<param name="flowCapacityFactor" value="0.015" />
		<param name="mainMode" value="car,car_bb,freight" />
		<param name="numberOfThreads" value="1" />
		<param name="startTime" value="00:00:00" />
		<param name="storageCapacityFactor" value="0.015" />
		<param name="stuckTime" value="30.0" />
		<param name="trafficDynamics" value="kinematicWaves" />
		<param name="vehiclesSource" value="modeVehicleTypesFromVehiclesData" />
		<param name="insertingWaitingVehiclesBeforeDrivingVehicles" value="true" />
	</module>
	<module name="strategy" >
		<param name="fractionOfIterationsToDisableInnovation" value="0.8" />
		<parameterset type="strategysettings" >
			<param name="strategyName" value="ChangeExpBeta" />
			<param name="subpopulation" value="person" />
			<param name="weight" value="0.85" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="strategyName" value="ReRoute" />
			<param name="subpopulation" value="person" />
			<param name="weight" value="0.05" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="strategyName" value="SubtourModeChoice" />
			<param name="subpopulation" value="person" />
			<param name="weight" value="0.05" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="strategyName" value="TimeAllocationMutator" />
			<param name="subpopulation" value="person" />
			<param name="weight" value="0.05" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="strategyName" value="ChangeExpBeta" />
			<param name="subpopulation" value="freight" />
			<param name="weight" value="0.95" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="strategyName" value="ReRoute" />
			<param name="subpopulation" value="freight" />
			<param name="weight" value="0.05" />
		</parameterset>
	</module>
	<module name="subtourModeChoice" >
		<param name="chainBasedModes" value="car_bb,bicycle" />
		<param name="modes" value="taxi,car_bb,pt,bicycle,walk" />
	</module>
	<module name="transitRouter" >
		<param name="extensionRadius" value="500.0" />
	</module>
	<module name="travelTimeCalculator" >
		<param name="analyzedModes" value="car,car_bb,freight" />
		<param name="separateModes" value="true" />
	</module>
	<module name="vspExperimental" >
		<param name="vspDefaultsCheckingLevel" value="warn" />
	</module>
	<module name="planCalcScore" >
		<param name="fractionOfIterationsToStartScoreMSA" value="1.0" />	
		<parameterset type="scoringParameters" >
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="ride" />
				<param name="monetaryDistanceRate" value="-0.0002" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="freight" />
				<param name="monetaryDistanceRate" value="-0.0004" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="-0.6" />
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="pt" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="-1.85" />
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="bicycle" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="walk" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="transit_walk" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="access_walk" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="egress_walk" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="marginalUtilityOfTraveling_util_hr" value="1.8" />
				<param name="mode" value="taxi" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="-1.5" />
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="car" />
				<param name="monetaryDistanceRate" value="-0.0002" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="-1.5" />
				<param name="marginalUtilityOfTraveling_util_hr" value="0.0" />
				<param name="mode" value="car_bb" />
				<param name="monetaryDistanceRate" value="-0.0002" />
			</parameterset>		
			<parameterset type="activityParams" >
				<param name="activityType" value="park-and-ride" />
				<param name="scoringThisActivityAtAll" value="false" />
				<param name="typicalDuration" value="00:01:00" />
				<param name="typicalDurationScoreComputation" value="relative" />
			</parameterset>	
			<parameterset type="activityParams" >
				<param name="activityType" value="taxi interaction" />
				<param name="scoringThisActivityAtAll" value="false" />
				<param name="typicalDuration" value="00:01:00" />
				<param name="typicalDurationScoreComputation" value="relative" />
			</parameterset>	
			
		</parameterset>			
	</module>
	
	<module name="taxi" >
		<!-- Used in AStarEuclidean for shortest path search for occupied drives. Default value is 1.0. Values above 1.0 (typically, 1.5 to 3.0) speed up search, but at the cost of obtaining longer paths -->
		<param name="AStarEuclideanOverdoFactor" value="1.0" />
		<!-- Specifies whether the simulation should interrupt if not all requests were performed when an interation ends. Otherwise, a warning is given. True by default. -->
		<param name="breakIfNotAllRequestsServed" value="false" />
		<!-- If true, the startLink is changed to last link in the current schedule, so the taxi starts the next day at the link where it stopped operating the day before. False by default. -->
		<param name="changeStartLinkToLastLinkInSchedule" value="false" />
		<!-- If false, the drop-off location remains unknown to the optimizer and scheduler until the end of pickup. False by default. -->
		<param name="destinationKnown" value="false" />
		<!-- If true, detailed hourly taxi stats are dumped after each iteration. False by default. -->
		<param name="detailedStats" value="true" />
		<!-- Typically, 60 seconds -->
		<param name="dropoffDuration" value="60.0" />
		<!-- Mode which will be handled by PassengerEngine and VrpOptimizer (passengers'/customers' perspective) -->
		<param name="mode" value="taxi" />
		<!-- If true, vehicles are (GPS-like) monitored while moving. This helps in getting more accurate estimates on the time of arrival. Online tracking is necessary for vehicle diversion. False by default. -->
		<param name="onlineVehicleTracker" value="false" />
		<!-- Typically, 120 seconds -->
		<param name="pickupDuration" value="120.0" />
		<!-- An XML file specifying the taxi fleet. The file format according to dvrp_vehicles_v1.dtd -->
		<param name="taxisFile" value="../../berlin-v5.2-10pct/input/berlin-v5.2.taxi-vehicles_150.xml.gz" />
		<!-- If true, writes time profiles of vehicle statuses (i.e. current task type) and the number of unplanned requests are written to a text file (taxi_status_time_profiles) and saved as plots. False by default. -->
		<param name="timeProfiles" value="true" />
		<!-- If true, vehicles can be diverted during empty trips. Requires online tracking. False by default. -->
		<param name="vehicleDiversion" value="false" />
		<parameterset type="optimizer" >
			<param name="cellSize" value="1000" />
			<param name="goal" value="DEMAND_SUPPLY_EQUIL" />
			<param name="id" value="example" />
			<param name="nearestRequestsLimit" value="99999" />
			<param name="nearestVehiclesLimit" value="99999" />
			<param name="type" value="RULE_BASED" />
		</parameterset>
	</module>
	
	<module name="dvrp" >
		<!-- Mode of which the network will be used for routing vehicles, calculating travel times, etc. (fleet operator's perspective). Default is car. -->
		<param name="networkMode" value="car" />
		<!-- Used for OFFLINE estimation of travel times for VrpOptimizer by means of the exponential moving average. The weighting decrease, alpha, must be in (0,1]. We suggest small values of alpha, e.g. 0.05. The averaging starts from the initial travel time estimates. If not provided, the free-speed TTs is used as the initial estimates -->
		<param name="travelTimeEstimationAlpha" value="0.05" />
		<!-- Used for ONLINE estimation of travel times for VrpOptimizer by combining WithinDayTravelTime and DvrpOfflineTravelTimeEstimator. The beta coefficient is provided in seconds and should be either 0 (no online estimation) or positive (mixed online-offline estimation). For 'beta = 0', only the offline estimate is used: 'onlineTT(t) = offlineTT(t)', where 'offlineTT(t)' in the offline estimate for TT at time 't', For 'beta > 0', estimating future TTs at time 't', uses the currently observed TT to correct the offline estimates is made: where 'currentTT' is the currently observed TT, and 'correction = min(1, max(0, 1 - (time - currentTime) / beta))' The rule is that correction decreases linearly from 1 (when 'time = currentTime') to 0 (when 'time = currentTime + beta' For 'time > currentTime + beta' correction is 0, whereas if 'time < currentTime' it is 1. If beta is sufficiently large, 'beta >> 0', only the currently observed TT is used. -->
		<param name="travelTimeEstimationBeta" value="0.0" />
	</module>
	
	<module name="taxifare" >
		<!-- Basefare per Trip (fare = positive value) -->
		<param name="basefare" value="0.0" />
		<!-- Daily subscription fee (fee = positive value) -->
		<param name="dailySubscriptionFee" value="0.0" />
		<!-- taxi fare per meter (fee = positive value) -->
		<param name="distanceFare_m" value="0.00035" />
		<!-- taxi fare per hour (fee = positive value) -->
		<param name="timeFare_h" value="0.0" />
		<param name="mode" value="taxi" />
	</module>
</config>
